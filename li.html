<html>
<head>
    <meta charset="utf-8">
    <title>平安陆金所投资项目-平安陆金所</title>
    <meta name="keywords" content="投资项目，平安陆金所投资项目">
    <meta name="description" content="平安陆金所投资项目，陆金所倾力打造投资服务，稳盈?安e贷，信合鼎晟，为中小企业及个人客户提供专业，可信赖的投融资，信托服务，帮您实现财富稳步增值。">
    <meta name="WT.pn_sku" content="产品列表">
    <meta name="WT.page_name" content="产品列表">
    <link rel="shortcut icon" href="https://static.lufax.com/config/images/favicon.ico">

    <link rel="stylesheet" type="text/css" href="https://static.lufax.com/config/css/main_1018.css?_v=201405271030">
    <link rel="stylesheet" type="text/css" href="https://static.lufax.com/config/css/layout.css?_v=201405271030">
    <link rel="stylesheet" type="text/css" href="https://static.lufax.com/list/css/list.css?_v=201405271030">
    <script type="text/javascript" charset="utf-8" src="https://static.lufax.com/config/js/lib/jquery-1.7.1.js?_v=201405271030"></script>
</head>
<body>
	<!--条件表单-->
	<form id="form">
	    <input id="minAmount" name="minAmount" value="0" type="hidden">
	    <input id="maxAmount" name="maxAmount" value="100000000" type="hidden">
	    <input id="minInstalments" name="minInstalments" value="1" type="hidden">
	    <input id="maxInstalments" name="maxInstalments" value="240" type="hidden">
	    <input id="collectionMode" name="collectionMode" value="" type="hidden">
	    <input id="productName" name="productName" value="" type="hidden">
	    <input id="column" name="column" value="publishedAt" type="hidden">
	    <input id="order" name="order" value="asc" type="hidden">
	    <input id="isDefault" name="isDefault" value="true" type="hidden">
	    <input id="isPromotion" name="isPromotion" value="0" type="hidden">
	    <input id="pageLimit" name="pageLimit" value="10" type="hidden">
	    <input id="curPage" name="curPage" value="1" type="hidden">
	    <input id="totalPage" name="totalPage" value="10" type="hidden">
	</form>
	<div class="list-content" style="position:relative;">
		<!--查询条件-->
		<div class="list-property">
		    <div class="list-property-head">
		        <span class="title">请选择</span>
		        <b></b>
		    </div>
		    <div class="list-property-body">
		        <dl class="clearfix list-property-col" id="list-property-minAmount">
		            <dt>投资金额</dt>
		            <dd>
		                <span class="all"><a class="cur" href="javascript:void(0);" identity="price" minamount="0" maxamount="100000000">全部</a></span>
		                <ul class="selection clearfix">
		                    <li><a href="javascript:void(0);" class="condition1" identity="price" minamount="0" maxamount="10000">1万元以下 <span class="count-num">(<em>1</em>)</span></a></li>
		                    <li><a href="javascript:void(0);" class="condition2" identity="price" minamount="10000" maxamount="50000">1万-5万元 <span class="count-num">(<em>3</em>)</span></a></li>
		                    <li><a href="javascript:void(0);" class="condition3" identity="price" minamount="50000" maxamount="100000000">5万元以上 <span class="count-num">(<em>3</em>)</span></a></li>
		                </ul>
		            </dd>
		        </dl>
		        <dl class="clearfix list-property-col">
		            <dt>投资期限</dt>
		            <dd>
		                <span class="all"><a class="cur" href="javascript:void(0);" identity="instalment" mininstalments="1" maxinstalments="240">全部</a></span>
		                <ul class="selection clearfix">
		                    <li><a href="javascript:void(0);" identity="instalment" mininstalments="1" maxinstalments="12">12个月以下</a></li>
		                    <li><a href="javascript:void(0);" identity="instalment" mininstalments="12" maxinstalments="240">12个月及以上</a></li>
		                </ul>
		            </dd>
		        </dl>
		        <div class="invest-range">
		            <ul class="clearfix">
		                <li><span class="input-wrap"><input type="text" class="input" id="rangeFrom"></span></li>
		                <li class="unit">万元</li>
		                <li class="dash">-</li>
		                <li><span class="input-wrap"><input type="text" class="input" id="rangeTo"></span></li>
		                <li class="unit">万元</li>
		            </ul>
		            <a href="javascript:void(0);" class="btns btn-cancel btn-range" id="J_FilterPrice">确定</a>
		        </div>
		    </div>
		</div>
		<div class="table-title-wrap clearfix">
	        <span class="table-title">符合的项目</span>
	        <ul class="sort-group clearfix">
	            <li class="first-col"><span class="def J_Sort" column="currentPrice">当前投资金额</span></li>
	            <li class="last-col"><span class="def J_Sort" column="investPeriod">投资期限</span></li>
	        </ul>
	        <span class="sort-txt">排序</span>
	    </div>
		<div class="list-table-wrap" id="list-table-wrap">
	    	<ul class="list-table" id="list-table">
			</ul>
			<div class="cpagination ui_complex_pagination">
	            <span class="btns disabled btn_page btn_small first" id="firstPage">首页</span>
	            <span class="btns disabled btn_page btn_small prev" id="prevPage"><span class="caret">&lt;</span> 上一页</span>
	            <p class="pageNum" id="pageNum">第1页/共11页</p>
	            <a class="btns btn_page btn_small next" href="javascript:void(0)" id="nextPage">下一页<span class="caret">&gt;</span></a>
	            <a class="btns btn_page btn_small last" href="javascript:void(0)" id="lastPage">尾页</a>
	        </div>
		</div>
	</div>
	<script type="text/template" id="J_OneListTmpl">
		<li class="clearfix">
        	<div class="product-status">
            	<p class="product-name">
					<a href="/list/productDetail?productId={productId}" target="_blank">{productNameDisplay} {code}</a>
					<i class="iconV2 transfer-icon"></i>
				</p>
				<div class="product-info-wrap clearfix">
		            <p class="product-info-l">
		                <span class="interest-rate">预期年化利率：{interestRateDisplay}%</span>
		                <span class="invest-period">投资期限：{investPeriodDisplay}</span>
		            </p>
		            <p class="product-info-r">
		                <span class="invest-price">项目本金：{currentPrice}
		                    元</span>
		            </p>
				</div>
			</div>
			<div class="operate-status done-status clearfix">
		        <div class="current-amount">
		            <strong>当前投资金额</strong>
		            <span class="cur">{currentPrice}</span> 元
		        </div>
				<a href="/list/productDetail?productId={productId}" target="_blank" class="done-success">交易成功</a>
			</div>
		</li>
	</script>
	<script>
	var $form = $('#form'),
		$curPage = $('#curPage'),
		$totalPage = $('#totalPage'),
		$column = $('#column'),
		$order = $('#order');

	var iPageLimit = $('#pageLimit').val();
	var sTmpl = $('#J_OneListTmpl').text();

	$(document).ready(function(){
		oSiteFront.initProperty();
		oSiteFront.sendAjax();

		$form.submit(function(e){
			e.preventDefault();
			oSiteFront.sendAjax();
		});
	});

	var oSiteFront = {

		// 初始化条件选择项目，包括投资金额、投资期限、排序、页码切换
		initProperty: function() {
			var $maxAmount = $("#maxAmount");
        	var $minAmount = $("#minAmount");
        	var $maxInstalments = $("#maxInstalments");
        	var $minInstalments = $("#minInstalments");

			$sortPrice = $('[column=currentPrice]'),
			$sortPeriod = $('[column=investPeriod]');
        	$('.J_Sort').toggle(
        		function() {
        			var order = 'asc';
        			var curColumn = $(this).attr('column');
        			if (curColumn == 'currentPrice') {
        				var $otherSort = $sortPeriod;
        			} else {
        				var $otherSort = $sortPrice;
        			}        			
        			$(this).addClass(order).removeClass('desc def');
        			$otherSort.addClass('def').removeClass('asc desc');
        			$column.val(curColumn);
        			$order.val(order);
        			$form.submit();
        		},
        		function() {
        			var order = 'desc';
        			var curColumn = $(this).attr('column');
        			if (curColumn == 'currentPrice') {
        				var $otherSort = $sortPeriod;
        			} else {
        				var $otherSort = $sortPrice;
        			}        			
        			$(this).addClass(order).removeClass('asc def');
        			$otherSort.addClass('def').removeClass('asc desc');
        			$column.val(curColumn);
        			$order.val(order);
        			$form.submit();
        		}
        	);

            // 投资金额
			$('[identity=price]').click(function(){
				$('[identity=price].cur').removeClass('cur');
				$(this).addClass('cur');
				var max = $(this).attr('maxamount');
				var min = $(this).attr('minamount');
				$maxAmount.val(max);
				$minAmount.val(min);
				$form.submit();
			});
			// 投资期限
			$('[identity=instalment]').click(function(){
				$('[identity=instalment].cur').removeClass('cur');
				$(this).addClass('cur');
				var min = $(this).attr('mininstalments');
				var max = $(this).attr('maxinstalments');
				$minInstalments.val(min);
				$maxInstalments.val(max);
				$form.submit();
			});
			// 手动填写投资金额
			$('#J_FilterPrice').click(function(){
				var rangeFromVal = Number($('#rangeFrom').val()) * 10000,
	                rangeToVal = Number($('#rangeTo').val()) * 10000;
	            if (rangeFromVal != '' || rangeToVal != '') {
	                if (rangeToVal == '') {
	                    $maxAmount.val(100000000);
	                } else {
	                    $maxAmount.val(rangeToVal);
	                }
	                if (rangeFromVal == '') {
	                    $minAmount.val(0);
	                } else {
	                    $minAmount.val(rangeFromVal);
	                }
	                $form.submit();
	            } else {
	            	return false;
	            }
			});
			$('#prevPage').click(function(){
				var curPage = Number($curPage.val()) - 1;
				$curPage.val(curPage);
				$form.submit();
			});
			$('#nextPage').click(function(){
				var curPage = Number($curPage.val()) + 1;
				$curPage.val(curPage);
				$form.submit();
			});
			$('#firstPage').click(function(){
				var curPage = Number(1);
				$curPage.val(curPage);
				$form.submit();
			});
			$('#lastPage').click(function(){
				var curPage = Number($totalPage.val());
				$curPage.val(curPage);
				$form.submit();
			});
		},

		// 初始化页码显示
		initPage: function(totalCount){
			var curPage = $curPage.val();// 当前页码
			// 获取总页数
			var totalNum = parseInt(totalCount/iPageLimit);
			totalNum = (totalCount%iPageLimit == 0) ? totalNum : totalNum + 1;
			$totalPage.val(totalNum);
			if (curPage == totalNum && curPage == 1) {
				$('#nextPage, #lastPage, #firstPage, #prevPage').addClass('disabled');
			} else if (curPage == 1) {
				$('#firstPage, #prevPage').addClass('disabled');
				$('#firstPage').attr('class');
				$('#nextPage, #lastPage').removeClass('disabled');
			} else if (curPage == totalNum) {
				$('#nextPage, #lastPage').addClass('disabled');
				$('#firstPage, #prevPage').removeClass('disabled');
			} else {
				$('#nextPage, #lastPage, #firstPage, #prevPage').removeClass('disabled');
			}
			$('#pageNum').text('第'+curPage+'页'+'/共'+totalNum+'页');
		},


		// 发送ajax请求
		sendAjax: function() {
			var curPage = $('#curPage').val();
			var params = $form.serialize();
			$.ajax({
				url: 'ajax.php',
				type: 'GET',
				data: params,
				success: function(data) {
					var oData = $.parseJSON(data);
					$('#list-table').html(oSiteFront.setTemplate(sTmpl, oData.data));
					oSiteFront.initPage(oData.totalCount);
				}
			});
		},

	    /*************************************
	     * @desc: 根据给定的模版和对象生成字符串
	     ************************************/
	    setTemplate: function(sTmpl, oVar){
	        var ary = [];
	        var more = "", str = "";
	        if (Array.isArray(oVar)) {
	            ary = oVar;
	        } else if ('object' == typeof(oVar)) {
	            ary[0] = oVar;
	        }
	        for (var i in ary) {
	            str = sTmpl;
	            for (var prop in ary[i]) {
	                var r = new RegExp('{'+prop+'}', 'g');
	                var v = ary[i][prop];
	                str = str.replace(r, v);
	            }
	            more += str;
	        }
	        return more;
	    }
	};

	</script>
</body>
</html>